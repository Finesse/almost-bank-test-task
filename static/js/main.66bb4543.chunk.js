(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{208:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t.n(n),c=t(82),o=t.n(c),l=t(16),u=t(9),s=t(84),i=t(88),m=t(22),d=t(14),b=t(43),p=t.n(b),E=1e4,f=["USD","EUR","GBP","AUD","BOB","CAD","CDF","CNY","CZK","HKD","JPY","LBP","NIO","RON","RUB","SEK","SZL","UAH","UYU","VUV","XCD","YER"],g=2;function v(e,a,t,n){var r=e.baseCurrency,c=e.rates,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g;if(t!==r&&!c.hasOwnProperty(t)||n!==r&&!c.hasOwnProperty(n))return null;var l=t===r?1:c[t],u=n===r?1:c[n];return 0===l?null:Number((a/l*u).toFixed(o))}var y=Math.pow(10,g),h={},x=!0,_=!1,C=void 0;try{for(var S,w=f[Symbol.iterator]();!(x=(S=w.next()).done);x=!0){var O=S.value,N=100+9900*Math.random();h[O]=Math.round(N*y)/y}}catch(ye){_=!0,C=ye}finally{try{x||null==w.return||w.return()}finally{if(_)throw C}}var j={exchangeRates:{areUpdating:!1},balance:h};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"EXCHANGE":var t;if(void 0===e.exchangeRates.data)return e;var n=a.sellCurrency,r=a.sellAmount,c=void 0===r?null:r,o=a.buyCurrency,l=a.buyAmount,u=void 0===l?null:l;if(n===o)return e;if(null!==c){if(null===(u=v(e.exchangeRates.data,c,n,o)))return e}else{if(null===u)throw new Error("Either sell or buy amount must be set");if(null===(c=v(e.exchangeRates.data,u,o,n)))return e}return Object(d.a)({},e,{balance:Object(d.a)({},e.balance,(t={},Object(m.a)(t,n,Number(p()(e.balance[n]||0).sub(c).toFixed())),Object(m.a)(t,o,Number(p()(e.balance[o]||0).add(u).toFixed())),t))});default:return Object(d.a)({},e,{exchangeRates:R(e.exchangeRates,a)})}}function R(e,a){switch(a.type){case"UPDATE_EXCHANGE_RATES":return Object(d.a)({},e,{areUpdating:!0,updateError:void 0});case"UPDATE_EXCHANGE_RATES_SUCCESS":return Object(d.a)({},e,{areUpdating:!1,updateError:void 0,data:a.exchangeRates,lastUpdateDate:a.date});case"UPDATE_EXCHANGE_RATES_FAIL":return Object(d.a)({},e,{areUpdating:!1,updateError:a.error});default:return e}}var U=t(5),F=t.n(U),B=t(8);var D=F.a.mark(P),k=F.a.mark(G),H=F.a.mark(X),T="UPDATE_EXCHANGE_RATES";function P(e){return F.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(B.e)(T,G,e);case 2:return a.next=4,Object(B.c)(X);case 4:case"end":return a.stop()}},D,this)}function G(e,a){var t,n,r;return F.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.fetchExchangeRates,a.prev=1,a.next=4,Object(B.a)(t);case 4:return n=a.sent,a.next=7,Object(B.a)([Date,"now"]);case 7:return r=a.sent,a.next=10,Object(B.d)({type:"UPDATE_EXCHANGE_RATES_SUCCESS",exchangeRates:n,date:r});case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(1),a.next=16,Object(B.d)({type:"UPDATE_EXCHANGE_RATES_FAIL",error:a.t0.message});case 16:case"end":return a.stop()}},k,this,[[1,12]])}function X(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(B.d)({type:"UPDATE_EXCHANGE_RATES"});case 3:return e.next=5,Object(B.b)(E);case 5:e.next=0;break;case 7:case"end":return e.stop()}},H,this)}var L=t(85),Y=function(){var e=Object(L.a)(F.a.mark(function e(){var a,t,n,r,c,o,l,u;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.floatrates.com/daily/usd.json");case 2:if(!((a=e.sent).status<200||a.status>=300)){e.next=5;break}throw new Error(a.body&&a.body.toString()||"Unknown error in a FloatRates.com client");case 5:return e.next=7,a.json();case 7:for(t=e.sent,n={},r=Object.values(t),c=0;c<r.length;c++)o=r[c],l=o.code,u=o.rate,n[l]=u;return e.abrupt("return",{baseCurrency:"USD",rates:n});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),I=t(29),M=t.n(I),K=Object(n.memo)(function(e){var a=e.children,t=e.footer;return r.a.createElement("div",{className:M.a.body},r.a.createElement("main",{className:M.a.main},a),t&&r.a.createElement("footer",{className:M.a.footer},t))}),z=t(86),J=t.n(z),V=t(6),W=t.n(V);var Z=Object(n.memo)(function(e){return r.a.createElement("div",{className:"".concat(W.a.box," ").concat(e.className||"")},r.a.createElement("div",{className:W.a.control},r.a.createElement("label",{className:W.a.currencySelectBox},r.a.createElement("select",{value:e.currency,onChange:function(a){return e.onCurrencySelect(a.target.value)},className:W.a.currencySelect},e.allCurrencies.map(function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement(J.a,{decimalScale:g,allowNegative:!1,prefix:e.negativeAmount?"\u2212":"+",value:null===e.amount?"":e.amount,onChange:function(a){return e.onAmountChange((t=(t=a.target.value).replace(/[^\d.]+/g,""),/[0-9]/.test(t)?Number(t):null));var t},onFocus:e.onAmountFocus,className:W.a.amountInput})),r.a.createElement("div",{className:W.a.info},r.a.createElement("div",null,"You have ",e.balance," ",r.a.createElement("span",{className:W.a.unit},e.currency)),null!==e.convertRatio&&r.a.createElement("div",null,"1 ",r.a.createElement("span",{className:W.a.unit},e.currency)," \u2248 ",e.convertRatio," ",r.a.createElement("span",{className:W.a.unit},e.oppositeCurrency))))}),q=t(7),Q=t.n(q);function $(){return($=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var ee=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{fill:"#010002",d:"M51.707,185.343c-2.741,0-5.493-1.044-7.593-3.149c-4.194-4.194-4.194-10.981,0-15.175 l74.352-74.347L44.114,18.32c-4.194-4.194-4.194-10.987,0-15.175c4.194-4.194,10.987-4.194,15.18,0l81.934,81.934 c4.194,4.194,4.194,10.987,0,15.175l-81.934,81.939C57.201,184.293,54.454,185.343,51.707,185.343z"}))),ae=function(e){return r.a.createElement("svg",$({version:1.1,id:"Capa_1",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 185.343 185.343",style:{enableBackground:"new 0 0 185.343 185.343"},xmlSpace:"preserve"},e),ee)};t.p;var te=Object(n.memo)(function(e){return"loading"===e.stage?r.a.createElement("div",{className:"".concat(Q.a.message," ").concat(e.className||"")},"Loading the data..."):"error"===e.stage?r.a.createElement("div",{className:"".concat(Q.a.message," ").concat(e.className||"")},"Error: ",e.error):r.a.createElement("form",{className:"".concat(Q.a.form," ").concat(e.className||""),onSubmit:function(a){a.preventDefault(),e.canSubmit&&e.onSubmit()}},r.a.createElement(Z,{className:Q.a.side,allCurrencies:e.currencies,currency:e.sellCurrency,oppositeCurrency:e.buyCurrency,amount:e.sellAmount,balance:e.sellBalance,convertRatio:e.sellToBuyRatio,onCurrencySelect:e.onSellCurrencySelect,onAmountChange:e.onSellAmountChange,onAmountFocus:e.onSellAmountFocus,negativeAmount:!0}),r.a.createElement(ae,{className:Q.a.arrow}),r.a.createElement(Z,{className:Q.a.side,allCurrencies:e.currencies,currency:e.buyCurrency,oppositeCurrency:e.sellCurrency,amount:e.buyAmount,balance:e.buyBalance,convertRatio:e.buyToSellRatio,onCurrencySelect:e.onBuyCurrencySelect,onAmountChange:e.onBuyAmountChange,onAmountFocus:e.onBuyAmountFocus}),r.a.createElement("div",{className:Q.a.buttonSection},r.a.createElement("button",{disabled:!e.canSubmit,className:Q.a.button},"Exchange"),e.validationError&&r.a.createElement("div",{className:Q.a.validationError},e.validationError)))}),ne=t(87),re=t(23),ce=t.n(re);function oe(){return(oe=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var le=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M55.323,203.641c15.664,0,29.813-9.405,35.872-23.854c25.017-59.604,83.842-101.61,152.42-101.61 c37.797,0,72.449,12.955,100.23,34.442l-21.775,3.371c-7.438,1.153-13.224,7.054-14.232,14.512 c-1.01,7.454,3.008,14.686,9.867,17.768l119.746,53.872c5.249,2.357,11.33,1.904,16.168-1.205 c4.83-3.114,7.764-8.458,7.796-14.208l0.621-131.943c0.042-7.506-4.851-14.144-12.024-16.332 c-7.185-2.188-14.947,0.589-19.104,6.837l-16.505,24.805C370.398,26.778,310.1,0,243.615,0C142.806,0,56.133,61.562,19.167,149.06 c-5.134,12.128-3.84,26.015,3.429,36.987C29.865,197.023,42.152,203.641,55.323,203.641z"}),r.a.createElement("path",{d:"M464.635,301.184c-7.27-10.977-19.558-17.594-32.728-17.594c-15.664,0-29.813,9.405-35.872,23.854 c-25.018,59.604-83.843,101.61-152.42,101.61c-37.798,0-72.45-12.955-100.232-34.442l21.776-3.369 c7.437-1.153,13.223-7.055,14.233-14.514c1.009-7.453-3.008-14.686-9.867-17.768L49.779,285.089 c-5.25-2.356-11.33-1.905-16.169,1.205c-4.829,3.114-7.764,8.458-7.795,14.207l-0.622,131.943 c-0.042,7.506,4.85,14.144,12.024,16.332c7.185,2.188,14.948-0.59,19.104-6.839l16.505-24.805 c44.004,43.32,104.303,70.098,170.788,70.098c100.811,0,187.481-61.561,224.446-149.059 C473.197,326.043,471.903,312.157,464.635,301.184z"}))),ue=function(e){return r.a.createElement("svg",oe({version:1.1,id:"Capa_1",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"487.23px",height:"487.23px",viewBox:"0 0 487.23 487.23",style:{enableBackground:"new 0 0 487.23 487.23"},xmlSpace:"preserve"},e),le)},se=(t.p,Object(n.memo)(function(e){var a=e.updating,t=e.lastUpdateDate,n=e.error,c=e.className,o=void 0===c?"":c;return r.a.createElement("div",{className:"".concat(ce.a.container," ").concat(o)},n&&r.a.createElement("div",{className:ce.a.error},"Failed to update rates: ",n),r.a.createElement("div",{className:ce.a.data},a&&r.a.createElement(ue,{className:ce.a.updating}),t&&r.a.createElement("div",null,"Rates were updated at ",Object(ne.format)(new Date(t),"H:mm:ss, D MMM YYYY"))))})),ie=Object(n.memo)(function(){return r.a.createElement(K,{footer:r.a.createElement(ge,null)},r.a.createElement(fe,null))}),me=t(30),de=t(89);function be(e,a){var t=Object(n.useRef)(function(){throw new Error("Cannot call an event handler while rendering.")});return Object(n.useLayoutEffect)(function(){t.current=e},[e].concat(Object(de.a)(a))),Object(n.useCallback)(function(){return t.current.apply(void 0,arguments)},[t])}var pe={exchange:function(e,a,t,n){return{type:"EXCHANGE",sellCurrency:e,sellAmount:a,buyCurrency:t,buyAmount:n}}};var Ee=Object(n.memo)(function(e){var a=e.exchangeRates,t=e.balance,c=e.className,o=e.exchange,l=Object(n.useState)(f[0]),u=Object(me.a)(l,2),s=u[0],i=u[1],m=Object(n.useState)(f[1]),d=Object(me.a)(m,2),b=d[0],p=d[1],E=Object(n.useState)({amount:null,side:"sell"}),g=Object(me.a)(E,2),y=g[0],h=y.amount,x=y.side,_=g[1],C=null===h||"sell"===x?h:v(a,h,b,s),S=null===h||"buy"===x?h:v(a,h,s,b),w=t[s]||0,O=t[b]||0,N=(null===C||w-C>=0)&&(null===S||O+S>=0),j=Object(n.useCallback)(function(e){return _({amount:e,side:"sell"})},[_]),A=Object(n.useCallback)(function(e){return _({amount:e,side:"buy"})},[_]),R=be(function(){"buy"===x&&_({amount:C,side:"sell"})},[_,x,C]),U=be(function(){"sell"===x&&_({amount:S,side:"buy"})},[_,x,S]),F=be(function(){null!==h&&(o(s,"sell"===x?h:void 0,b,"buy"===x?h:void 0),_({amount:null,side:x}))},[o,_,s,b,h,x]);return r.a.createElement(te,{stage:"ready",className:c,currencies:f,sellCurrency:s,buyCurrency:b,sellAmount:C,buyAmount:S,sellBalance:t[s]||0,buyBalance:t[b]||0,sellToBuyRatio:v(a,1,s,b,4),buyToSellRatio:v(a,1,b,s,4),canSubmit:N&&null!==h,validationError:!N&&"Insufficient funds",onSellCurrencySelect:i,onBuyCurrencySelect:p,onSellAmountChange:j,onBuyAmountChange:A,onSellAmountFocus:R,onBuyAmountFocus:U,onSubmit:F})}),fe=Object(l.b)(function(e){return{exchangeRates:e.exchangeRates.data,balance:e.balance,isUpdating:e.exchangeRates.areUpdating,updateError:e.exchangeRates.updateError}},pe)(function(e){return e.exchangeRates?r.a.createElement(Ee,Object.assign({},e,{exchangeRates:e.exchangeRates})):e.isUpdating?r.a.createElement(te,{stage:"loading",className:e.className}):r.a.createElement(te,{stage:"error",error:e.updateError||"Unknown error",className:e.className})}),ge=Object(l.b)(function(e){return{updating:e.exchangeRates.areUpdating,lastUpdateDate:e.exchangeRates.lastUpdateDate,error:e.exchangeRates.updateError}})(se),ve=function(e){var a=Object(i.a)(),t=Object(u.createStore)(A,Object(s.composeWithDevTools)(Object(u.applyMiddleware)(a)));return a.run(P,e),t}({fetchExchangeRates:Y});o.a.render(r.a.createElement(l.a,{store:ve},r.a.createElement(ie,null)),document.getElementById("root"))},23:function(e,a,t){e.exports={container:"UpdateStatus_container__1VvHf",error:"UpdateStatus_error__3dv-a",data:"UpdateStatus_data__3b-kI",updating:"UpdateStatus_updating__2IfGK",rotate:"UpdateStatus_rotate__3jfQn"}},29:function(e,a,t){e.exports={body:"Layout_body__1ITRR",main:"Layout_main__2B45d",footer:"Layout_footer__t1rBt"}},6:function(e,a,t){e.exports={box:"ExchangeFormHalf_box__1iLS-",control:"ExchangeFormHalf_control__3fd5Y",info:"ExchangeFormHalf_info__1Cnxj",currencySelectBox:"ExchangeFormHalf_currencySelectBox__1KFtw",currencySelect:"ExchangeFormHalf_currencySelect__uWCxX",amountInput:"ExchangeFormHalf_amountInput__1R298",unit:"ExchangeFormHalf_unit__GPnzY"}},7:function(e,a,t){e.exports={form:"ExchangeForm_form__3xtVM",message:"ExchangeForm_message__35ZrD",arrow:"ExchangeForm_arrow__2u9a2",side:"ExchangeForm_side__1BJsW",buttonSection:"ExchangeForm_buttonSection__3Hspk",button:"ExchangeForm_button__2H-OB",validationError:"ExchangeForm_validationError__qpyGY"}},90:function(e,a,t){e.exports=t(208)}},[[90,2,1]]]);
//# sourceMappingURL=main.66bb4543.chunk.js.map